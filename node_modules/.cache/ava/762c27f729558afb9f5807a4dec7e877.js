'use strict';

var _ava = require('ava');

var _ava2 = _interopRequireDefault(_ava);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _Needs = require('./index.js');

(0, _ava2.default)(function (t) {
    var err1 = testStrictCorrect();
    var err2 = testStrictIncorrect();

    if (err1) {
        console.log('testStrictCorrect', err1);
        return t.fail();
    }
    if (!err2) {
        console.log('testStrictIncorrect', err1);
        return t.fail();
    }

    t.pass();
});

function testStrictCorrect() {
    var needs = _Needs({});
    var test = needs.params({
        a: 'int',
        b_: 'float',
        c: {
            d_: 'int[]',
            e: {
                f: 'str',
                g: 'datetime'
            }
        }
    });
    return test({
        body: {
            a: 42,
            b: 3.14,
            c: {
                e: {
                    f: 'test',
                    g: Date.now()
                }
            }
        }
    }, null, function () {});
}
function testStrictIncorrect() {
    var needs = _Needs({ onError: function onError(options) {
            return 'Successful Error Test';
        } });
    var test = needs.params({
        a: 'int',
        b_: 'float',
        c: {
            d_: 'int[]',
            e: {
                f: 'str',
                g: 'datetime'
            }
        }
    });
    return test({
        body: {
            a: 42,
            b: 3.14,
            c: {
                e: {
                    f: 'test',
                    g: Date.now()
                },
                f: 1
            }
        }
    }, null, function () {});
}